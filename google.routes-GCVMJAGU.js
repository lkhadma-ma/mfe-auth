import{a as E}from"./chunk-KTDSW5VC.js";import{a as b,b as x,c as s}from"./chunk-2VMXMS7J.js";import{inject as w}from"@angular/core";import{CommonModule as Q}from"@angular/common";import{Router as X}from"@angular/router";var C="__NATIVE_FEDERATION__",I=globalThis;I[C]??={externals:new Map,remoteNamesToRemote:new Map,baseUrlToRemoteNames:new Map};var p=I[C],A=p.externals;function k(t){return`${t.packageName}@${t.version}`}function G(t){let o=k(t);return A.get(o)}function N(t,o){let n=k(t);A.set(n,o)}var D=p.remoteNamesToRemote,g=p.baseUrlToRemoteNames;function j(t,o){D.set(t,o),g.set(o.baseUrl,t)}function B(t){return g.get(t)}function P(t){return g.has(t)}function O(t){return D.get(t)}function z(t){document.head.appendChild(Object.assign(document.createElement("script"),{type:"importmap-shim",innerHTML:JSON.stringify(t)}))}function v(t){let o=t.split("/");return o.pop(),o.join("/")}function f(t,o){for(;t.endsWith("/");)t=t.substring(0,t.length-1);return o.startsWith("./")&&(o=o.substring(2,o.length)),`${t}/${o}`}var M=(function(t){return t.COMPLETED="federation-rebuild-complete",t.ERROR="federation-rebuild-error",t})(M||{});function F(t){let o=new EventSource(t);o.onmessage=function(n){JSON.parse(n.data).type===M.COMPLETED&&(console.log("[Federation] Rebuild completed, reloading..."),window.location.reload())},o.onerror=function(n){console.warn("[Federation] SSE connection error:",n)}}function V(t,o){return s(this,null,function*(){let n=v(t),r=yield L(t);o||(o=r.name),r.buildNotificationsEndpoint&&F(n+r.buildNotificationsEndpoint);let i=U(r,o,n);return j(o,x(b({},r),{baseUrl:n})),i})}function U(t,o,n){let r=$(t,o,n),i=H(t,n);return{imports:r,scopes:i}}function L(t){return s(this,null,function*(){return yield fetch(t).then(n=>n.json())})}function H(t,o){let n={},r={};for(let i of t.shared){let a=G(i)??f(o,i.outFileName);N(i,a),r[i.packageName]=a}return n[o+"/"]=r,n}function $(t,o,n){let r={};for(let i of t.exposes){let a=f(o,i.key),u=f(n,i.outFileName);r[a]=u}return r}function _(t,o){return s(this,null,function*(){let n=J(t,o);yield q(n);let r=W(n),i=O(r),a=n.fallback,u=i?"":"unknown remote "+r;if(!i&&!a)throw new Error(u);if(!i)return S(u),Promise.resolve(a);let l=i.exposes.find(c=>c.key===n.exposedModule),y=l?"":`Unknown exposed module ${n.exposedModule} in remote ${r}`;if(!l&&!a)throw new Error(y);if(!l)return S(y),Promise.resolve(a);let T=f(i.baseUrl,l.outFileName);try{return K(T)}catch(c){if(a)return console.error("error loading remote module",c),a;throw c}})}function K(t){return typeof importShim<"u"?importShim(t):import(t)}function W(t){let o;if(t.remoteName)o=t.remoteName;else if(t.remoteEntry){let n=v(t.remoteEntry);o=B(n)}else throw new Error("unexpcted arguments: Please pass remoteName or remoteEntry");if(!o)throw new Error("unknown remoteName "+o);return o}function q(t){return s(this,null,function*(){if(t.remoteEntry&&!P(v(t.remoteEntry))){let o=yield V(t.remoteEntry);z(o)}})}function J(t,o){let n;if(typeof t=="string"&&o)n={remoteName:t,exposedModule:o};else if(typeof t=="object"&&!o)n=t;else throw new Error("unexpected arguments: please pass options or a remoteName/exposedModule-pair");return n}function S(t){typeof window<"u"&&console.error(t)}import{runInInjectionContext as Y}from"@angular/core";import*as m from"@angular/core";var h=class t{constructor(o){this.injector=o}remote;readyPromise;initRemote(){return s(this,null,function*(){return this.readyPromise||(this.readyPromise=s(this,null,function*(){let o=yield _({remoteName:"shared",exposedModule:"./AlertService"});return this.remote=Y(this.injector,()=>new o.AlertService),this.remote})),this.readyPromise})}show(o,n="info",r=5e3,i){this.initRemote().then(a=>{a.show(o,n,r,i)})}static \u0275fac=function(n){return new(n||t)(m.\u0275\u0275inject(m.EnvironmentInjector))};static \u0275prov=m.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"})};import*as e from"@angular/core";import*as R from"@angular/common";function Z(t,o){t&1&&(e.\u0275\u0275elementStart(0,"div",20)(1,"div",12),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(2,"svg",21),e.\u0275\u0275element(3,"path",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(4,"span",22),e.\u0275\u0275text(5,"Google Drive Connected"),e.\u0275\u0275elementEnd()()())}function ee(t,o){t&1&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(0,"svg",23),e.\u0275\u0275element(1,"circle",24)(2,"path",25),e.\u0275\u0275elementEnd())}function te(t,o){t&1&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(0,"svg",26),e.\u0275\u0275element(1,"path",27)(2,"path",28)(3,"path",29)(4,"path",30),e.\u0275\u0275elementEnd())}function oe(t,o){t&1&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(0,"svg",31),e.\u0275\u0275element(1,"path",14),e.\u0275\u0275elementEnd())}var d=class t{googleAuthService=w(E);router=w(X);alert=w(h);isAuthenticating=!1;isConnected=!1;ngOnInit(){return s(this,null,function*(){this.preventBackButton(),this.isAuthenticating=!0,setTimeout(()=>s(this,null,function*(){this.checkConnectionStatus().then(o=>{this.isConnected=o,this.isAuthenticating=!1,this.isConnected?setTimeout(()=>{this.onDashboardClick()},500):this.alert.show("Google Drive is not connected, Please authorize access to your Google Drive to continue.","error")})}),1e3)})}onAuthorizeClick(){return s(this,null,function*(){this.isAuthenticating=!0;try{if(this.googleAuthService.currentUser()||(this.alert.show("You need to be logged in to authorize Google Drive access.","error"),this.router.navigate(["/auth/login"])),!(yield this.googleAuthService.linkGoogleDrive()))throw this.alert.show("Failed to link Google Drive. Please try again.","error"),new Error("Failed to link Google Drive");this.isConnected=!0,setTimeout(()=>{this.onDashboardClick()},500)}catch(o){console.error("Error during Google Drive authorization:",o)}finally{this.isAuthenticating=!1}})}checkConnectionStatus(){return s(this,null,function*(){return yield this.googleAuthService.isGoogleDriveLinked()})}ngOnDestroy(){window.onpopstate=null}preventBackButton(){history.pushState(null,"",location.href),window.onpopstate=o=>{history.pushState(null,"",location.href),this.showBackButtonBlockedMessage()}}showBackButtonBlockedMessage(){alert("Back navigation is disabled on this page. Use the provided button to navigate."),console.log("Back button pressed but blocked")}onDashboardClick(){window.onpopstate=null,this.router.navigate(["/lk"])}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=e.\u0275\u0275defineComponent({type:t,selectors:[["app-google-drive-auth"]],decls:35,vars:6,consts:[[1,"mfe-auth-w-screen","mfe-auth-h-screen","mfe-auth-flex","mfe-auth-items-center","mfe-auth-justify-center","mfe-auth-bg-gray-100","mfe-auth-p-4"],[1,"mfe-auth-container","mfe-auth-bg-white","mfe-auth-rounded-lg","mfe-auth-shadow-md","mfe-auth-p-6","mfe-auth-max-w-md","mfe-auth-mx-auto"],[1,"mfe-auth-text-center","mfe-auth-mb-6"],[1,"mfe-auth-mx-auto","mfe-auth-w-12","mfe-auth-h-12","mfe-auth-bg-blue-100","mfe-auth-rounded-full","mfe-auth-flex","mfe-auth-items-center","mfe-auth-justify-center","mfe-auth-mb-4"],["fill","currentColor","viewBox","0 0 24 24",1,"mfe-auth-w-6","mfe-auth-h-6","mfe-auth-text-blue-600"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 16c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"],[1,"mfe-auth-text-xl","mfe-auth-font-semibold","mfe-auth-text-gray-900"],[1,"mfe-auth-text-gray-600","mfe-auth-mt-2"],["class","mfe-auth-bg-green-50 mfe-auth-border mfe-auth-border-green-200 mfe-auth-rounded-lg mfe-auth-p-4 mfe-auth-mb-6",4,"ngIf"],[1,"mfe-auth-bg-gray-50","mfe-auth-rounded-lg","mfe-auth-p-4","mfe-auth-mb-6"],[1,"mfe-auth-text-sm","mfe-auth-font-medium","mfe-auth-text-gray-900","mfe-auth-mb-3"],[1,"mfe-auth-space-y-2","mfe-auth-text-sm","mfe-auth-text-gray-600"],[1,"mfe-auth-flex","mfe-auth-items-center"],["fill","currentColor","viewBox","0 0 20 20",1,"mfe-auth-w-4","mfe-auth-h-4","mfe-auth-text-green-500","mfe-auth-mr-2"],["fill-rule","evenodd","d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule","evenodd"],[1,"mfe-auth-w-full","mfe-auth-bg-blue-600","mfe-auth-text-white","mfe-auth-py-3","mfe-auth-px-4","mfe-auth-rounded-lg","mfe-auth-font-medium","mfe-auth-flex","mfe-auth-items-center","mfe-auth-justify-center","mfe-auth-transition-colors","mfe-auth-duration-200","hover:mfe-auth-bg-blue-700","focus:mfe-auth-outline-none","focus:mfe-auth-ring-2","focus:mfe-auth-ring-blue-500","focus:mfe-auth-ring-offset-2","disabled:mfe-auth-opacity-50","disabled:mfe-auth-cursor-not-allowed",3,"click","disabled"],["class","mfe-auth-animate-spin mfe-auth-w-5 mfe-auth-h-5 mfe-auth-mr-2","fill","none","viewBox","0 0 24 24",4,"ngIf"],["class","mfe-auth-w-5 mfe-auth-h-5 mfe-auth-mr-2","viewBox","0 0 24 24","fill","currentColor",4,"ngIf"],["class","mfe-auth-w-5 mfe-auth-h-5 mfe-auth-mr-2","fill","currentColor","viewBox","0 0 20 20",4,"ngIf"],[1,"mfe-auth-text-xs","mfe-auth-text-gray-500","mfe-auth-text-center","mfe-auth-mt-4"],[1,"mfe-auth-bg-green-50","mfe-auth-border","mfe-auth-border-green-200","mfe-auth-rounded-lg","mfe-auth-p-4","mfe-auth-mb-6"],["fill","currentColor","viewBox","0 0 20 20",1,"mfe-auth-w-5","mfe-auth-h-5","mfe-auth-text-green-500","mfe-auth-mr-2"],[1,"mfe-auth-text-green-800","mfe-auth-font-medium"],["fill","none","viewBox","0 0 24 24",1,"mfe-auth-animate-spin","mfe-auth-w-5","mfe-auth-h-5","mfe-auth-mr-2"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"mfe-auth-opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"mfe-auth-opacity-75"],["viewBox","0 0 24 24","fill","currentColor",1,"mfe-auth-w-5","mfe-auth-h-5","mfe-auth-mr-2"],["d","M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"],["d","M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"],["d","M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"],["d","M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"],["fill","currentColor","viewBox","0 0 20 20",1,"mfe-auth-w-5","mfe-auth-h-5","mfe-auth-mr-2"]],template:function(n,r){n&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(4,"svg",4),e.\u0275\u0275element(5,"path",5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(6,"h2",6),e.\u0275\u0275text(7,"Google Drive Access"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"p",7),e.\u0275\u0275text(9," To use out service please grant permission to access your Google Drive files and folders "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(10,Z,6,0,"div",8),e.\u0275\u0275elementStart(11,"div",9)(12,"h3",10),e.\u0275\u0275text(13,"This will allow:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"ul",11)(15,"li",12),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(16,"svg",13),e.\u0275\u0275element(17,"path",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(18," View and manage Google Drive files "),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(19,"li",12),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(20,"svg",13),e.\u0275\u0275element(21,"path",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(22," Upload and download files "),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(23,"li",12),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(24,"svg",13),e.\u0275\u0275element(25,"path",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(26," Create and organize folders "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(27,"button",15),e.\u0275\u0275listener("click",function(){return r.onAuthorizeClick()}),e.\u0275\u0275template(28,ee,3,0,"svg",16)(29,te,5,0,"svg",17)(30,oe,2,0,"svg",18),e.\u0275\u0275elementStart(31,"span"),e.\u0275\u0275text(32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"p",19),e.\u0275\u0275text(34," Your data is secure and we only access what you authorize "),e.\u0275\u0275elementEnd()()()),n&2&&(e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",r.isConnected),e.\u0275\u0275advance(17),e.\u0275\u0275property("disabled",r.isAuthenticating||r.isConnected),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",r.isAuthenticating),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!r.isAuthenticating&&!r.isConnected),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",r.isConnected&&!r.isAuthenticating),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",r.isAuthenticating?"Connecting to Google Drive...":r.isConnected?"Google Drive Connected":"Authorize Google Drive"," "))},dependencies:[Q,R.NgIf],styles:["[_nghost-%COMP%]{display:block}.mfe-auth-transition-colors[_ngcontent-%COMP%]{transition-property:color,background-color,border-color;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}"]})};var Ie=[{path:"",component:d,title:"Auth"}];export{Ie as DRIVE_ROUTES};
