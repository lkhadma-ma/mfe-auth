import{b as h}from"./chunk-BJE3JKBP.js";import{a as c}from"./chunk-KTDSW5VC.js";import{c as a}from"./chunk-2VMXMS7J.js";import{inject as u}from"@angular/core";import{CommonModule as p}from"@angular/common";import{Router as v}from"@angular/router";import{runInInjectionContext as g}from"@angular/core";import*as r from"@angular/core";var m=class i{constructor(t){this.injector=t}remote;readyPromise;initRemote(){return a(this,null,function*(){return this.readyPromise||(this.readyPromise=a(this,null,function*(){let t=yield h({remoteName:"shared",exposedModule:"./AlertService"});return this.remote=g(this.injector,()=>new t.AlertService),this.remote})),this.readyPromise})}show(t,n="info",o=5e3,l){this.initRemote().then(d=>{d.show(t,n,o,l)})}static \u0275fac=function(n){return new(n||i)(r.\u0275\u0275inject(r.EnvironmentInjector))};static \u0275prov=r.\u0275\u0275defineInjectable({token:i,factory:i.\u0275fac,providedIn:"root"})};import*as e from"@angular/core";import*as f from"@angular/common";function w(i,t){i&1&&(e.\u0275\u0275elementStart(0,"div",20)(1,"div",12),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(2,"svg",21),e.\u0275\u0275element(3,"path",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(4,"span",22),e.\u0275\u0275text(5,"Google Drive Connected"),e.\u0275\u0275elementEnd()()())}function y(i,t){i&1&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(0,"svg",23),e.\u0275\u0275element(1,"circle",24)(2,"path",25),e.\u0275\u0275elementEnd())}function C(i,t){i&1&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(0,"svg",26),e.\u0275\u0275element(1,"path",27)(2,"path",28)(3,"path",29)(4,"path",30),e.\u0275\u0275elementEnd())}function b(i,t){i&1&&(e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(0,"svg",31),e.\u0275\u0275element(1,"path",14),e.\u0275\u0275elementEnd())}var s=class i{googleAuthService=u(c);router=u(v);alert=u(m);isAuthenticating=!1;isConnected=!1;ngOnInit(){return a(this,null,function*(){this.preventBackButton(),this.isAuthenticating=!0,setTimeout(()=>a(this,null,function*(){this.checkConnectionStatus().then(t=>{this.isConnected=t,this.isAuthenticating=!1,this.isConnected?setTimeout(()=>{this.onDashboardClick()},500):this.alert.show("Google Drive is not connected, Please authorize access to your Google Drive to continue.","error")})}),1e3)})}onAuthorizeClick(){return a(this,null,function*(){this.isAuthenticating=!0;try{if(this.googleAuthService.currentUser()||(this.alert.show("You need to be logged in to authorize Google Drive access.","error"),this.router.navigate(["/auth/login"])),!(yield this.googleAuthService.linkGoogleDrive()))throw this.alert.show("Failed to link Google Drive. Please try again.","error"),new Error("Failed to link Google Drive");this.isConnected=!0,setTimeout(()=>{this.onDashboardClick()},500)}catch(t){console.error("Error during Google Drive authorization:",t)}finally{this.isAuthenticating=!1}})}checkConnectionStatus(){return a(this,null,function*(){return yield this.googleAuthService.isGoogleDriveLinked()})}ngOnDestroy(){window.onpopstate=null}preventBackButton(){history.pushState(null,"",location.href),window.onpopstate=t=>{history.pushState(null,"",location.href),this.showBackButtonBlockedMessage()}}showBackButtonBlockedMessage(){alert("Back navigation is disabled on this page. Use the provided button to navigate."),console.log("Back button pressed but blocked")}onDashboardClick(){window.onpopstate=null,this.router.navigate(["/lk"])}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=e.\u0275\u0275defineComponent({type:i,selectors:[["app-google-drive-auth"]],decls:35,vars:6,consts:[[1,"mfe-auth-w-screen","mfe-auth-h-screen","mfe-auth-flex","mfe-auth-items-center","mfe-auth-justify-center","mfe-auth-bg-gray-100","mfe-auth-p-4"],[1,"mfe-auth-container","mfe-auth-bg-white","mfe-auth-rounded-lg","mfe-auth-shadow-md","mfe-auth-p-6","mfe-auth-max-w-md","mfe-auth-mx-auto"],[1,"mfe-auth-text-center","mfe-auth-mb-6"],[1,"mfe-auth-mx-auto","mfe-auth-w-12","mfe-auth-h-12","mfe-auth-bg-blue-100","mfe-auth-rounded-full","mfe-auth-flex","mfe-auth-items-center","mfe-auth-justify-center","mfe-auth-mb-4"],["fill","currentColor","viewBox","0 0 24 24",1,"mfe-auth-w-6","mfe-auth-h-6","mfe-auth-text-blue-600"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 16c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"],[1,"mfe-auth-text-xl","mfe-auth-font-semibold","mfe-auth-text-gray-900"],[1,"mfe-auth-text-gray-600","mfe-auth-mt-2"],["class","mfe-auth-bg-green-50 mfe-auth-border mfe-auth-border-green-200 mfe-auth-rounded-lg mfe-auth-p-4 mfe-auth-mb-6",4,"ngIf"],[1,"mfe-auth-bg-gray-50","mfe-auth-rounded-lg","mfe-auth-p-4","mfe-auth-mb-6"],[1,"mfe-auth-text-sm","mfe-auth-font-medium","mfe-auth-text-gray-900","mfe-auth-mb-3"],[1,"mfe-auth-space-y-2","mfe-auth-text-sm","mfe-auth-text-gray-600"],[1,"mfe-auth-flex","mfe-auth-items-center"],["fill","currentColor","viewBox","0 0 20 20",1,"mfe-auth-w-4","mfe-auth-h-4","mfe-auth-text-green-500","mfe-auth-mr-2"],["fill-rule","evenodd","d","M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule","evenodd"],[1,"mfe-auth-w-full","mfe-auth-bg-blue-600","mfe-auth-text-white","mfe-auth-py-3","mfe-auth-px-4","mfe-auth-rounded-lg","mfe-auth-font-medium","mfe-auth-flex","mfe-auth-items-center","mfe-auth-justify-center","mfe-auth-transition-colors","mfe-auth-duration-200","hover:mfe-auth-bg-blue-700","focus:mfe-auth-outline-none","focus:mfe-auth-ring-2","focus:mfe-auth-ring-blue-500","focus:mfe-auth-ring-offset-2","disabled:mfe-auth-opacity-50","disabled:mfe-auth-cursor-not-allowed",3,"click","disabled"],["class","mfe-auth-animate-spin mfe-auth-w-5 mfe-auth-h-5 mfe-auth-mr-2","fill","none","viewBox","0 0 24 24",4,"ngIf"],["class","mfe-auth-w-5 mfe-auth-h-5 mfe-auth-mr-2","viewBox","0 0 24 24","fill","currentColor",4,"ngIf"],["class","mfe-auth-w-5 mfe-auth-h-5 mfe-auth-mr-2","fill","currentColor","viewBox","0 0 20 20",4,"ngIf"],[1,"mfe-auth-text-xs","mfe-auth-text-gray-500","mfe-auth-text-center","mfe-auth-mt-4"],[1,"mfe-auth-bg-green-50","mfe-auth-border","mfe-auth-border-green-200","mfe-auth-rounded-lg","mfe-auth-p-4","mfe-auth-mb-6"],["fill","currentColor","viewBox","0 0 20 20",1,"mfe-auth-w-5","mfe-auth-h-5","mfe-auth-text-green-500","mfe-auth-mr-2"],[1,"mfe-auth-text-green-800","mfe-auth-font-medium"],["fill","none","viewBox","0 0 24 24",1,"mfe-auth-animate-spin","mfe-auth-w-5","mfe-auth-h-5","mfe-auth-mr-2"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"mfe-auth-opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"mfe-auth-opacity-75"],["viewBox","0 0 24 24","fill","currentColor",1,"mfe-auth-w-5","mfe-auth-h-5","mfe-auth-mr-2"],["d","M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"],["d","M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"],["d","M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"],["d","M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"],["fill","currentColor","viewBox","0 0 20 20",1,"mfe-auth-w-5","mfe-auth-h-5","mfe-auth-mr-2"]],template:function(n,o){n&1&&(e.\u0275\u0275elementStart(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(4,"svg",4),e.\u0275\u0275element(5,"path",5),e.\u0275\u0275elementEnd()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(6,"h2",6),e.\u0275\u0275text(7,"Google Drive Access"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(8,"p",7),e.\u0275\u0275text(9," To use out service please grant permission to access your Google Drive files and folders "),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(10,w,6,0,"div",8),e.\u0275\u0275elementStart(11,"div",9)(12,"h3",10),e.\u0275\u0275text(13,"This will allow:"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(14,"ul",11)(15,"li",12),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(16,"svg",13),e.\u0275\u0275element(17,"path",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(18," View and manage Google Drive files "),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(19,"li",12),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(20,"svg",13),e.\u0275\u0275element(21,"path",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(22," Upload and download files "),e.\u0275\u0275elementEnd(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(23,"li",12),e.\u0275\u0275namespaceSVG(),e.\u0275\u0275elementStart(24,"svg",13),e.\u0275\u0275element(25,"path",14),e.\u0275\u0275elementEnd(),e.\u0275\u0275text(26," Create and organize folders "),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275namespaceHTML(),e.\u0275\u0275elementStart(27,"button",15),e.\u0275\u0275listener("click",function(){return o.onAuthorizeClick()}),e.\u0275\u0275template(28,y,3,0,"svg",16)(29,C,5,0,"svg",17)(30,b,2,0,"svg",18),e.\u0275\u0275elementStart(31,"span"),e.\u0275\u0275text(32),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(33,"p",19),e.\u0275\u0275text(34," Your data is secure and we only access what you authorize "),e.\u0275\u0275elementEnd()()()),n&2&&(e.\u0275\u0275advance(10),e.\u0275\u0275property("ngIf",o.isConnected),e.\u0275\u0275advance(17),e.\u0275\u0275property("disabled",o.isAuthenticating||o.isConnected),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.isAuthenticating),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",!o.isAuthenticating&&!o.isConnected),e.\u0275\u0275advance(),e.\u0275\u0275property("ngIf",o.isConnected&&!o.isAuthenticating),e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate1(" ",o.isAuthenticating?"Connecting to Google Drive...":o.isConnected?"Google Drive Connected":"Authorize Google Drive"," "))},dependencies:[p,f.NgIf],styles:["[_nghost-%COMP%]{display:block}.mfe-auth-transition-colors[_ngcontent-%COMP%]{transition-property:color,background-color,border-color;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}"]})};var O=[{path:"",component:s,title:"Auth"}];export{O as DRIVE_ROUTES};
